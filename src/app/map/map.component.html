<h1 style="text-align: center">Map Markers</h1>

<agm-map
  [latitude]="lat"
  [longitude]="lng"
  [zoom]="zoom"
>
  <agm-marker
    *ngFor="let m of markers;let i = index"
    [latitude]="m.latitude"
    [longitude]="m.longitude"
  >
    <agm-info-window>
      <div *ngIf="m.have">
        <strong>Have</strong>
      </div>
      <div *ngIf="m.help">
        <strong>Help</strong>
      </div>
      {{m.message}}
      <br>
      <i>Address: </i> {{m.address}}
      <br>
      <i>Created: </i> {{m.createdAt}}
    </agm-info-window>
  </agm-marker>
</agm-map>
<div class="container">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <form name="form" onSubmit="return false" #f="ngForm" novalidate>
        <h2>Add A Pin</h2>
        <h3>Where are you?</h3>
        <div class="address-input">
          <mat-form-field>
            <input matInput name="address" [(ngModel)]="model.address" placeholder="Address">
          </mat-form-field>
        </div>
      </form>
      <form>
        <h4>Do you need help or wanting to help?</h4>
        <mat-radio-button class="marker" (click)="toggleHelp()"> Help me!</mat-radio-button><br>
        <div *ngIf="help" class="pin-input">
          <mat-form-field>
            <input matInput name="message" matInput #message maxlength="255" [(ngModel)]="model.message" placeholder="Message (Optional)">
            <mat-hint align="end">{{message.value.length}} / 255</mat-hint>
          </mat-form-field>
          <br>
          <button mat-flat-button color="primary" (click)="setMsgAddress()">Create Pin</button>
        </div>

        <mat-radio-button class="marker" (click)="toggleHave()"> Offer amenities</mat-radio-button>
        <div *ngIf="have" class="pin-input">
          <div class="supply-info">
            <mat-form-field>
              <mat-select placeholder="Supplies" multiple>
                <label *ngFor="let supply of supplyOptions">
                <mat-option (click)="supply.value=!supply.value">{{supply.type}}</mat-option>
                </label>
              </mat-select>
            </mat-form-field>
            <br>
            <mat-form-field hintLabel="At least one supply must be selected">
              <input matInput name="description_supply" [(ngModel)]="model.message" [ngModelOptions]="{standalone: true}" placeholder="Supply Description (Optional)">
              <br>
            </mat-form-field>
          </div>
          <button mat-flat-button color="primary" (click)="setMsgAddress()">Create Pin</button>
        </div>
      </form>
    </div>
  </div>
</div>
